# Setup GitHub Action

> This repository uses [hooopo/oh-my-github-pipeline](https://github.com/hooopo/oh-my-github-pipeline)
> and [hooopo/repo-track-pipeline](https://github.com/hooopo/repo-track-pipeline) to collect your data from GitHub API
> and persist to your own TiDB Serverless cluster. **Your data will not be collected by other services.**
>
> See [.github/workflows/pipelines.yml](../.github/workflows/pipelines.yml) for more details about GitHub Action
> workflows.

- Click [here(TODO: CHANGE_OWNER_TO_pingcap)](http://github.com/634750802/ossinsight-lite/fork) to fork ossinsight-lite.
- [Setup GitHub Action secrets](#setup-github-action-secrets)
- [Enable and run workflow](#enable-and-run-workflow)

## Setup GitHub Action secrets

> Several environment variables is used to run data pipeline properly.
>
> See [GitHub Secrets](./env.md#github) for more details about what pipeline will use.

- Goto `Settings` / `Secrets and variables` / `Actions` page of your forked repository.
- Click `New repository secret` button at right top of the page
- Set `Name` to "DATABASE_URL"

  Set `Secret` to "**mysql2**://`user`:`password`@`host`:4000".
  Example: `mysql2://xxxxx.root:yyyyy@zzzzzprod.aws.tidbcloud.com:4000`.

  The connection info was generated by [last step](database.md). Do not add any blank characters.

  ![github-set-secret.png](images/github-set-secret.png)

## Enable and run workflow

Click `Actions` tab of your forked repository, Make sure you enable GitHub Action for this repo.

![enable-fork-action.png](images/enable-fork-action.png)![]()

Click `GitHub Data Pipeline` workflow on the left side navigator, click `Enable workflow` if the warning alert exists.
Once the workflow is enabled, it will be scheduled in every 2 hours.

![github-actions-side.png](images/github-actions-side.png)
![TODO: make new screenshot](images/enable-workflow.png)

For the first time, you can manually run workflow. The first run will take a while based on your activities amount.

![TODO: make new screenshot](images/run-workflow.png)

---

Next step doesn't require the workflow finished, you could carry on while the workflow is running. If any error occurs,
see [troubleshooting section](../../README.md#troubleshooting) for solutions.

---

Last step: [1. Setup TiDB Serverless cluster](database.md)

Next step: [3. Deploy to Vercel](deploy-to-vercel.md)